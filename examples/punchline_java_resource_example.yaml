---
apiVersion: punchline.gitlab.thalesdigital.io/v2
kind: StreamPunchline
metadata:
  name: punchline-java-resource-sample
  annotations:
    punchplatform.thalesdigital.io/platform: platform
spec: 
  containers:
    applicationContainer:
      image: ghcr.io/punchplatform/punchline-java:8.0-dev
      imagePullPolicy: IfNotPresent
      env:
      - name: JDK_JAVA_OPTIONS
        value: "-Xms100m -Xmx450m"
  dependencies:
  - punch-parsers:com.mycompany:test-parsers:1.0.0
  dag:
  - id: generator
    kind: source
    type: generator_source
    settings:
      messages:
      - color=green city=Paris uri=https://punchplatform.com
      - color=yellow city=New York uri=https://punchplatform.com
      - color=red city=London uri=https://punchplatform.com
    out:
      - id: punchlet
        table: logs
        columns:
          - name: log
            type: string
  - id: punchlet
    kind: function
    type: punchlet_function
    settings:
      punchlet_grok_pattern_dirs:
        - com/mycompany/sample/groks
      punchlet_json_resources:
        - com/mycompany/sample/resources/color_codes.json
      punchlets:
        - com/mycompany/sample/parser.punch